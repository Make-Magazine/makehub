/*! 
 * BuddyBoss Theme JavaScript Library 
 * @package BuddyBoss Theme 
 */
jQuery(function(y){function g(e,i,d){if(e.find(".bbp-reply-form form").find("#bbp-template-notices").html(""),"undefined"!=typeof bp&&void 0!==bp.Nouveau&&void 0!==bp.Nouveau.Media){e.find(".gif-media-search-dropdown").removeClass("open"),e.find("#whats-new-toolbar .toolbar-button").removeClass("active disable");var o=e.find("#whats-new-attachments .forums-attached-gif-container");o.length&&(o.addClass("closed"),o.find(".gif-image-container img").attr("src",""),o[0].style=""),e.find("#bbp_media_gif").length&&e.find("#bbp_media_gif").val(""),void 0!==i&&d&&(void 0!==bp.Nouveau.Media.dropzone_obj[i]&&(bp.Nouveau.Media.dropzone_obj[i].destroy(),bp.Nouveau.Media.dropzone_obj.splice(i,1),bp.Nouveau.Media.dropzone_media.splice(i,1)),e.find('div#forums-post-media-uploader[data-key="'+i+'"]').html(""),e.find('div#forums-post-media-uploader[data-key="'+i+'"]').addClass("closed").removeClass("open"),e.find('div#forums-post-document-uploader[data-key="'+i+'"]').html(""),e.find('div#forums-post-document-uploader[data-key="'+i+'"]').addClass("closed").removeClass("open"))}}y("body").hasClass("reply-edit")||y(".bbp-reply-form form").on("submit",function(e){if(e.preventDefault(),y(this).hasClass("submitting"))return!1;y(this).addClass("submitting");var i=!0,d=!0,o=y(e.target).find(".bbp-the-content").data("key"),t=!1;void 0!==window.forums_medium_reply_editor&&void 0!==window.forums_medium_reply_editor[o]&&(t=window.forums_medium_reply_editor[o]),(0<y(this).find("#bbp_media").length&&0<y(this).find("#bbp_document").length&&0<y(this).find("#bbp_media_gif").length&&""==y(this).find("#bbp_media").val()&&""==y(this).find("#bbp_document").val()&&""==y(this).find("#bbp_media_gif").val()||0<y(this).find("#bbp_media").length&&0<y(this).find("#bbp_document").length&&y(this).find("#bbp_media_gif").length<=0&&""==y(this).find("#bbp_media").val()&&""==y(this).find("#bbp_document").val()||0<y(this).find("#bbp_media_gif").length&&y(this).find("#bbp_media").length<=0&&y(this).find("#bbp_document").length<=0&&""==y(this).find("#bbp_media_gif").val())&&(d=!1),t&&""===y(y.parseHTML(y(this).find("#bbp_reply_content").val())).text().trim()&&0==d?(y(this).find(".bbp-the-content").addClass("error"),i=!1):t||""!==y.trim(y(this).find("#bbp_reply_content").val())||0!=d?(t&&y(this).find(".bbp-the-content").removeClass("error"),y(this).find("#bbp_reply_content").removeClass("error")):(y(this).find("#bbp_reply_content").addClass("error"),i=!1),i?function(e,i,d,o){var t={action:e,nonce:i};y.each(d,function(e,i){"action"===i.name?t.bbp_reply_form_action=i.value:t[i.name]=i.value});var c=o.closest("#bbpress-forums");y.post(window.bbpReplyAjaxJS.bbp_ajaxurl,t,function(e){if(e.success){c.find(".bbp-reply-form form").removeClass("submitting");var i="";if("edit"===e.reply_type)i='<li class="highlight">'+e.content+"</li>",y("#post-"+e.reply_id).parent("li").replaceWith(i);else if(window.bbpReplyAjaxJS.threaded_reply&&e.reply_parent&&e.reply_parent!==e.reply_id){var d=null,o="1";if(y("#post-"+e.reply_parent).parent("li").data("depth")==window.bbpReplyAjaxJS.threaded_reply_depth){var t=parseInt(window.bbpReplyAjaxJS.threaded_reply_depth)-1;d=y("#post-"+e.reply_parent).closest("li.depth-"+t),o=window.bbpReplyAjaxJS.threaded_reply_depth}else d=y("#post-"+e.reply_parent).parent("li"),o=parseInt(d.data("depth"))+1;var a="ul";c.find(".bb-single-reply-list").is("ol")&&(a="ol"),d.find(">"+a+".bbp-threaded-replies").length||d.append("<"+a+' class="bbp-threaded-replies"></'+a+">"),i='<li class="highlight depth-'+o+'" data-depth="'+o+'">'+e.content+"</li>",d.find(">"+a+".bbp-threaded-replies").append(i)}else if(e.current_page==e.total_pages)i='<li class="highlight depth-1" data-depth="1">'+e.content+"</li>",c.find(".bb-single-reply-list").append(i);else{var n=e.redirect_url,r=n.substring(0,n.indexOf("#"));window.location.href=r}if(""!==e.tags){var p=y("body .item-tags"),s=y("body .item-tags ul");"none"===p.css("display")?(p.append(e.tags),p.show()):(s.remove(),p.append(e.tags))}""!=i&&(y("body").animate({scrollTop:y(i).offset().top},500),setTimeout(function(){y(i).removeClass("highlight")},2e3));var l=c.find(".bbp-reply-form form").find("#forums-post-media-uploader").data("key"),b=!1;if("undefined"!=typeof bp&&void 0!==bp.Nouveau&&void 0!==bp.Nouveau.Media&&void 0!==bp.Nouveau.Media.dropzone_media&&void 0!==bp.Nouveau.Media.dropzone_media[l]&&bp.Nouveau.Media.dropzone_media[l].length){b=!0;for(var f=0;f<bp.Nouveau.Media.dropzone_media[l].length;f++)bp.Nouveau.Media.dropzone_media[l][f].saved=!0}var m=c.find(".bbp-reply-form form").find("#forums-post-document-uploader").data("key"),u=!1;if("undefined"!=typeof bp&&void 0!==bp.Nouveau&&void 0!==bp.Nouveau.Media&&void 0!==bp.Nouveau.Media.dropzone_media&&void 0!==bp.Nouveau.Media.dropzone_media[m]&&bp.Nouveau.Media.dropzone_media[m].length){u=!0;for(f=0;f<bp.Nouveau.Media.dropzone_media[m].length;f++)bp.Nouveau.Media.dropzone_media[m][f].saved=!0}var _=c.find(".bbp-reply-form form").find(".bbp-the-content").data("key");void 0!==window.forums_medium_reply_editor&&void 0!==window.forums_medium_reply_editor[_]&&(window.forums_medium_reply_editor[_].execAction("selectAll"),window.forums_medium_reply_editor[_].execAction("removeFormate"),window.forums_medium_reply_editor[_].resetContent()),c.find(".bbp-reply-form form").find(".bbp-the-content").removeClass("error"),c.find("#bbp-close-btn").trigger("click"),c.find("#bbp_reply_content").val(""),g(c,l,b),g(c,m,u);var h=c.find(".scrubberpost");for(var v in h)if(y(h[v]).hasClass("post-"+e.reply_id)){window.BuddyBossThemeBbpScrubber.goToPost(parseInt(v,10)+1,"");break}}else void 0!==e.content&&c.find(".bbp-reply-form form").find("#bbp-template-notices").html(e.content);c.find(".bbp-reply-form form").removeClass("submitting")})}("reply",window.bbpReplyAjaxJS.reply_nonce,y(this).serializeArray(),y(this)):y(this).removeClass("submitting")})});