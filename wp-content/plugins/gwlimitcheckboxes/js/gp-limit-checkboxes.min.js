!function(l){window.GPLimitCheckboxes=function(e){var o=this;for(prop in e)e.hasOwnProperty(prop)&&(o[prop]=e[prop]);o.init=function(){window.GPLimitCheckboxes&&!window.GPLimitCheckboxes.instances&&(window.GPLimitCheckboxes.instances={}),o.bindTriggerEvents(),o.listenForChanges(),window.GPLimitCheckboxes.instances[o.formId]=o},o.resetCheckboxElemCache=function(){o.checkboxElemCache={}},o.bindTriggerEvents=function(){for(var e=[],i=l.map(o.triggers,function(e){return e}),t=0;t<i.length;t++)e.push(i[t].selector);var n=l(e.join(", "));o.resetCheckboxElemCache(),n.each(function(){l(this).parents(".gfield").data("gf-disabled-assessed")&&!l(this).hasClass("gf-default-disabled")||l(this).filter(":disabled").addClass("gplc-pre-disabled")}),n.filter('input[id$="select_all"]').addClass("gplc-select-all"),n.change(function(){o.handleCheckboxClick(l(this))}).each(function(){o.handleCheckboxClick(l(this))})},o.listenForChanges=function(){l(document).on("gppa_updated_batch_fields",function(e,i){i==o.formId&&o.bindTriggerEvents()}),gform.addAction("gpi_field_refreshed",function(e,i,t){e.closest("form").prop("id").replace("gform_","")==o.formId&&o.bindTriggerEvents()})},o.handleCheckboxClick=function(e){for(var i=[],t=[],n=void 0!==e?parseInt(e.attr("id").split("_")[2]):null,r=0;r<o.groups.length;r++){var c=gform.applyFilters("gplc_group",l.extend(!0,{},o.groups[r]),n,e,o);o.isGroupMaxed(c)?i=l.merge(i,c.fields):t=l.merge(t,c.fields)}(t=GPLimitCheckboxes.diff(t,i)).length&&o.getCheckboxesByFieldIds(t).not(".gplc-pre-disabled, .gplc-select-all").attr("disabled",!1);if(i.length){var s=o.getCheckboxesByFieldIds(i);s.not(":checked, .gplc-pre-disabled, .gplc-select-all").attr("disabled",!0),s.filter(":checked:disabled:not( .gplc-pre-disabled )").attr("checked",!1).trigger("change")}},o.isGroupMaxed=function(e){var i=0;return l(o.getSelector(e.fields)).filter(":checked:not( .gplc-select-all )").each(function(){var e=this.id.split("_");i+=gform.applyFilters("gplcb_checkbox_count",1,o.formId,parseInt(e[2]),parseInt(e[3]))}),i>=e.max},o.getSelector=function(e){for(var i=[],t=0;t<e.length;t++){var n=e[t];n in o.triggers&&i.push(o.triggers[n].selector)}return i.join(", ")},o.getCheckboxesByFieldIds=function(e){var i=e.join(",");return i in o.checkboxElemCache||(o.checkboxElemCache[i]=l(o.getSelector(e))),o.checkboxElemCache[i]},o.isFieldHidden=function(e){var i=l("#input_"+o.formId+"_"+e);return gformIsHidden(i.children(":first-child"))},GPLimitCheckboxes.diff=function(e,i){return e.filter(function(e){return i.indexOf(e)<0})},o.init()}}(jQuery);
//# sourceMappingURL=gp-limit-checkboxes.js.map