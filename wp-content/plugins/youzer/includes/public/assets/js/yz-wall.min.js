!function(s){"use strict";s(document).ready(function(){if(jQuery().viewportChecker){if(s.yz_init_wall_posts_effect=function(){s(".yz_effect")[0]&&s(".yz_effect").viewportChecker({classToAdd:"animated",classToRemove:"invisible",removeClassAfterAnimation:!0,offset:"10%",callbackFunction:function(a,t){a.addClass(a.data("effect"))}},500)},s.yz_init_wall_posts_effect(),s("body").on("append","#activity-stream",function(a){s.yz_init_wall_posts_effect()}),s(".yz-column-content div.activity")[0])new MutationObserver(function(a){s.yz_init_wall_posts_effect()}).observe(s(".yz-column-content div.activity")[0],{attributes:!1,childList:!0,subtree:!1,characterData:!1});if(s("div.activity #activity-stream")[0])new MutationObserver(function(a){s.yz_init_wall_posts_effect()}).observe(s("div.activity #activity-stream")[0],{attributes:!1,childList:!0,subtree:!1,characterData:!1})}if(s(document).on("click",".yz-trigger-who-modal",function(a){s(".yz-wall-modal-overlay").fadeIn(500,function(){s(this).find(".yz-modal-loader").fadeIn(400)}),a.preventDefault();var t={action:"yz_get_who_liked_post",post_id:s(this).data("who-liked")};jQuery.post(Youzer.ajax_url,t,function(a){s("#yz-wall-modal").append(a).find(".yz-wall-modal").addClass("yz-wall-modal-show"),s(".yz-wall-modal-overlay").find(".yz-modal-loader").hide()})}),s(document).on("click",".yz-show-tagged-users",function(a){a.preventDefault(),s(".yz-wall-modal-overlay").fadeIn(500,function(){s(this).find(".yz-modal-loader").fadeIn(400)});var t=s(this).closest("li.activity-item"),i={action:"yz_activity_tagged_users_modal",post_id:t.attr("id").substr(9,t.attr("id").length)};jQuery.post(Youzer.ajax_url,i,function(a){s("#yz-wall-modal").append(a).find(".yz-wall-modal").addClass("yz-wall-modal-show"),s(".yz-wall-modal-overlay").find(".yz-modal-loader").hide()})}),s(document).keyup(function(a){s(".yz-wall-modal-show")[0]&&27===a.keyCode&&s(".yz-wall-modal-close").trigger("click")}),s(document).mouseup(function(a){s(".yz-wall-modal-overlay").is(a.target)&&s(".yz-wall-modal-show")[0]&&s(".yz-wall-modal-close").trigger("click")}),"on"==Youzer.activity_autoloader){var i=s(window);i.scroll(function(){var a=s("#activity-stream .load-more:visible");if(a.get(0)&&!a.data("yz-autoloaded")){var t=a.offset().top-3e3;i.scrollTop()+i.height()>t&&(a.data("yz-autoloaded",1),a.find("a").trigger("click"))}})}s("#activity-stream").on("click",".friendship-button a",function(){s(this).parent().addClass("loading");var a=s(this).attr("id"),t=s(this).attr("href"),e=s(this);return a=(a=a.split("-"))[1],t=(t=(t=t.split("?_wpnonce="))[1].split("&"))[0],jq.post(ajaxurl,{action:"addremove_friend",cookie:bp_get_cookies(),fid:a,_wpnonce:t},function(a){var t=e.attr("rel"),i=e.parent();"add"===t?s(i).fadeOut(200,function(){i.removeClass("add_friend"),i.removeClass("loading"),i.addClass("pending_friend"),i.fadeIn(200).html(a)}):"remove"===t&&s(i).fadeOut(200,function(){i.removeClass("remove_friend"),i.removeClass("loading"),i.addClass("add"),i.fadeIn(200).html(a)})}),!1}),s("#activity-stream").on("click",".group-button a",function(a){s(this).hasClass("membership-requested")||s(this).addClass("yz-btn-loading");var t=s(this).parent().attr("id"),i=s(this).attr("href"),o=s(this);return t=(t=t.split("-"))[1],i=(i=(i=i.split("?_wpnonce="))[1].split("&"))[0],o.hasClass("leave-group")&&!1===confirm(BP_DTheme.leave_group_confirm)||jq.post(ajaxurl,{action:"joinleave_group",cookie:bp_get_cookies(),gid:t,_wpnonce:i},function(i){var e=o.parent();s(e).fadeOut(200,function(){e.fadeIn(200).html(i);var a=s("#groups-personal span"),t=1;o.hasClass("leave-group")?(e.hasClass("hidden")&&e.closest("li").slideUp(200),t=0):o.hasClass("request-membership")&&(t=!1),a.length&&!1!==t&&(t?a.text(1+(a.text()>>0)):a.text((a.text()>>0)-1))})}),!1}),s("audio").on("play",function(){s("audio").not(this).each(function(a,t){t.pause()})}),s(document).on("click",".nice-select .option",function(a){s(this).parent().prev(".current").attr("data-value",s(this).attr("data-value"))}),s("#activity-stream").on("click","li.load-more",function(a){if(s(this).closest(".yz-activity-shortcode")[0]){a.stopImmediatePropagation();var t=s(this);t.addClass("loading");var i=s(this).parents(".yz-activity-shortcode");i.attr("data-page",parseInt(i.attr("data-page"))+1);var e=i.data();return e.page=i.attr("data-page"),s.post(ajaxurl,{data:e,action:"yz_activity_load_activities"},function(a){a.success&&(t.hide(),t.parents("ul.activity-list").append(a.data))},"json"),!1}}),s("body").append('<div id="yz-wall-modal"></div><div class="yz-wall-modal-overlay"><div class="yz-modal-loader"><i class="fas fa-spinner fa-spin"></i></div></div>'),s(document).on("click",".activity-item .yz-show-item-tools",function(a){var t=s(this);if(!t.hasClass("loading")){t.addClass("loading");var i=t.closest("li.activity-item"),e=t.find("i").attr("class");t.hasClass("loaded")?i.find(".yz-activity-tools").fadeToggle():(t.find("i").attr("class","fas fa-spin fa-spinner"),s.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{activity_id:i.attr("id").substr(9,i.attr("id").length),action:"yz_get_activity_tools"},success:function(a){t.find("i").attr("class",e),t.addClass("loaded"),a.success&&i.prepend(s(a.data).fadeIn())}}))}})})}(jQuery);