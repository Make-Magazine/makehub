!function(r){"use strict";r(document).ready(function(){r(".yz-giphy-submit-search");var d,y='<div class="yz-giphy-grid-sizer"></div>',n=(r(".yz-load-more-giphys"),r(".yz-selected-giphy-item"),{itemSelector:".yz-giphy-item",columnWidth:".yz-giphy-grid-sizer",percentPosition:!0,gutter:10}),s=!1;r(document).on("click",".yz-delete-giphy-item",function(){var i=r(this).closest("form");i.find(".yz-selected-giphy-item").fadeOut(400,function(){r(this).find("img").remove(),r(this).find("input").val(""),i.find(".yz-wall-giphy-form .yz-wall-cf-item").fadeIn(200,function(){d=i.find(".yz-giphy-items-content").masonry(n)})})}),r(document).on("click",".yz-giphy-item img",function(i){if(!0!==s){s=!0;var t=r(this).attr("data-original"),e=r(this).closest("form"),a=e.find(".yz-selected-giphy-item");e.find(".yz-wall-giphy-form .yz-wall-cf-item").fadeOut(400,function(){e.find(".yz-giphy-loading-preview").fadeIn(),a.find("input").val(t);var i=r("<img>").attr({src:t});a.prepend(i),r(i).on("load",function(i){e.find(".yz-giphy-loading-preview").fadeOut(100,function(){a.fadeIn().css("display","inline-block"),s=!1})})})}}),r(document).on("click",".yz-giphy-submit-search","click",function(){var i=r(this).closest("form"),t=i.find(".yz-giphy-submit-search"),e=r(this).prev(".yz-giphy-search-input").val(),a=i.find(".yz-load-more-giphys");a.fadeOut(1),a.attr("data-query",e),a.attr("data-page",2),i.find(".yz-giphy-items-content").html(y),d=i.find(".yz-giphy-items-content").masonry(n),""!=e&&(t.addClass("loading"),t.html('<i class="fas fa-spin fa-spinner"></i>'),r.yz_LoadGiphyItems(i,{q:e}))}),r(document).on("keypress",".yz-giphy-search-input",function(i){13==i.keyCode&&(i.preventDefault(),r(this).closest("form").find(".yz-giphy-submit-search").click())}),r(document).on("click",".yz-load-more-giphys",function(i){var t=r(this).closest("form"),e=t.find(".yz-load-more-giphys");e.addClass("loading"),e.html('<i class="fas fa-spinner fa-spin"></i>');var a=parseInt(r(this).attr("data-page")),n={q:r(this).attr("data-query"),offset:a*Yz_Wall.giphy_limit-2};r.yz_LoadGiphyItems(t,n);r(this).attr("data-page",a+1)}),r.fn.yz_giphy_masonryImagesReveal=function(e,i,a){var n=e.find(".yz-giphy-submit-search"),s=e.find(".yz-load-more-giphys"),o=this.data("masonry"),d=o.options.itemSelector;return i.hide(),this.append(i),i.imagesLoaded().progress(function(i,t){r(t.img).parents(d).show(1,function(){o.appended(r(this)),1==a&&s.fadeIn(),n.hasClass("loading")&&(n.removeClass("loading"),n.html("Search")),s.hasClass("loading")&&(s.removeClass("loading"),s.html("Load More")),e.find(".yz-giphy-items-content").animate({scrollTop:e.find(".yz-giphy-items-content").prop("scrollHeight")},1e3)})}),this},r.yz_LoadGiphyItems=function(e,i){var a,n,s=r.extend({api_key:"aFFKTuSMjd6j0wwjpFCPXZipQbcnw3vB",limit:Yz_Wall.giphy_limit,fmt:"json",rating:"g"},i),o="";r.ajax({url:"https://api.giphy.com/v1/gifs/search?"+r.param(s),method:"GET",success:function(i){if(0!==i.data.length){for(void 0===s.offset&&e.find(".yz-giphy-items-content").html(y),a=0;a<s.limit;a++){var t=i.data[a].images;o+='<div class="yz-giphy-item"><img src="'+t.fixed_height.url+'" data-original="'+t.original.url+'"></div>'}n=i.pagination.total_count>s.limit,d.yz_giphy_masonryImagesReveal(e,r(o),n)}}})}})}(jQuery);